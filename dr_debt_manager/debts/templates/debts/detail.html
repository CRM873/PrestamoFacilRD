{% extends "layout.html" %}
{% block title %}Debt Details{% endblock %}
{% block content %}
<h1>{{ debt.title }}</h1>
<p>Customer: <a href="{% url 'customers:detail' debt.customer.pk %}">{{ debt.customer }}</a></p>
<p>Principal: {{ debt.principal }} | Annual Rate: {{ debt.annual_interest_rate }}% | Term: {{ debt.term_in_periods }} | Frequency: {{ debt.get_frequency_display }}</p>
<p>Payment amount: <strong>{{ payment_amount }}</strong></p>

<h2>Amortization Schedule</h2>
<table>
	<thead>
		<tr>
			<th>#</th>
			<th>Payment</th>
			<th>Principal</th>
			<th>Interest</th>
			<th>Balance</th>
		</tr>
	</thead>
	<tbody>
		{% for row in schedule %}
		<tr>
			<td>{{ row.period }}</td>
			<td>{{ row.payment }}</td>
			<td>{{ row.principal }}</td>
			<td>{{ row.interest }}</td>
			<td>{{ row.balance }}</td>
		</tr>
		{% endfor %}
	</tbody>
</table>

<h2>Payments</h2>
<p><a href="/admin/debts/payment/add/">Add Payment</a></p>
<table>
	<thead>
		<tr>
			<th>Date</th>
			<th>Amount</th>
			<th>Method</th>
		</tr>
	</thead>
	<tbody>
		{% for p in debt.payments.all %}
		<tr>
			<td>{{ p.date }}</td>
			<td>{{ p.amount }}</td>
			<td>{{ p.method }}</td>
		</tr>
		{% empty %}
		<tr><td colspan="3">No payments yet.</td></tr>
		{% endfor %}
	</tbody>
</table>
{% endblock %}